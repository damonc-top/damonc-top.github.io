<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="baidu-site-verification" content="code-BGVivWGmxV" /><title>Unity å¤šçº¹ç†èåˆ(ç¿»è¯‘ä¸‰)</title><meta name="description" content="æœ¬ç¯‡æ‘˜è¦ï¼š é‡‡æ ·å¤šä¸ªçº¹ç† åº”ç”¨ç»†èŠ‚çº¹ç† å¤„ç†çº¿æ€§ç©ºé—´ä¸­çš„é¢œè‰² ä½¿ç”¨ splat åœ°å›¾"><link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon"><link rel="icon" href="/favicon.ico?" type="image/x-icon"><link rel="stylesheet" href="/css/main.css "><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href=" /css/font_8v3czwksspqlg14i.css "><link rel="canonical" href="https://www.damonc.top/2018/01/02/Unity_Combine_Texture/"><link rel="alternate" type="application/rss+xml" title="çˆ±ç©¿æ‹–é‹" href="https://www.damonc.top/feed.xml "> <script type="text/javascript" src=" /js/jquery_3_2_0.min.js " charset="utf-8"></script> <script type="text/javascript" src=" /js/Valine.min.js " charset="utf-8"></script> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "//hm.baidu.com/hm.js?8c087101d4768b7aa439cef954b30a8f"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <script> (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-WN45VXRK'); </script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <scrip type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/js-polyfills/0.1.43/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><body class="custom-background"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WN45VXRK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header id="top"><div class="wrapper"> <a href="/" class="brand">çˆ±ç©¿æ‹–é‹</a> <small>è‡ªç”±è‡ªåœ¨ğŸ©´</small> <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button><nav id="headerNav"><ul><li> <a href="/"> <i class="fa fa-home"></i>Home </a><li> <a href="/archive/"> <i class="fa fa-archive"></i>å½’æ¡£ </a><li> <a href="/category/"> <i class="fa fa-th-list"></i>åˆ†ç±» </a><li> <a href="/tag/"> <i class="fa fa-tags"></i>æ ‡ç­¾ </a><li> <a href="/collection/"> <i class="fa fa-bookmark"></i>æ”¶é›† </a><li> <a href="/demo/"> <i class="fa fa-play"></i>å·¥å…· </a><li> <a href="/about/"> <i class="fa fa-heart"></i>About </a></ul></nav></div></header><div class="home-right-bar"> <button class="anchor"><i class="fa fa-anchor"></i></button><div class="right"><div class="wrap"><div class="side content"><div> ç›®å½•</div><ul id="content-side" class="content-ul"><li><a href="#comments">Comments</a></ul></div></div></div></div><div class="page clearfix" post><div class="left"><h1>Unity å¤šçº¹ç†èåˆ(ç¿»è¯‘ä¸‰)</h1><div class="label"><div class="label-card"> <i class="fa fa-calendar"></i>2018-01-02</div><div class="label-card"> <i class="fa fa-user"></i>catlikecoding</div><div class="label-card"></div><div class="label-card"> <span class="categories"> <i class="fa fa-th-list"></i> <a href="/category/#ç¿»è¯‘" title="Category: ç¿»è¯‘" rel="category">ç¿»è¯‘</a> </span></div><div class="label-card"> <span class="pageTag"> <i class="fa fa-tags"></i> <b href="/tag/#Shader" title="Tag: Shader" rel="tag">Shader</b>&nbsp; <b href="/tag/#Unity3d" title="Tag: Unity3d" rel="tag">Unity3d</b> </span></div></div><hr><article itemscope itemtype="http://schema.org/BlogPosting"><ul id="markdown-toc"><li><a href="#çº¹ç†åˆå¹¶" id="markdown-toc-çº¹ç†åˆå¹¶">çº¹ç†åˆå¹¶</a><ul><li><a href="#ç»†èŠ‚çº¹ç†" id="markdown-toc-ç»†èŠ‚çº¹ç†">ç»†èŠ‚çº¹ç†</a><li><a href="#å¤šå¼ çº¹ç†è´´å›¾é‡‡æ ·" id="markdown-toc-å¤šå¼ çº¹ç†è´´å›¾é‡‡æ ·">å¤šå¼ çº¹ç†è´´å›¾é‡‡æ ·</a><li><a href="#å•ç‹¬çš„ç»†èŠ‚çº¹ç†" id="markdown-toc-å•ç‹¬çš„ç»†èŠ‚çº¹ç†">å•ç‹¬çš„ç»†èŠ‚çº¹ç†</a><li><a href="#ä½¿ç”¨ä¸¤ä¸ªuv" id="markdown-toc-ä½¿ç”¨ä¸¤ä¸ªuv">ä½¿ç”¨ä¸¤ä¸ªUV</a><li><a href="#ç»†èŠ‚çº¹ç†æ¸å˜èåˆ" id="markdown-toc-ç»†èŠ‚çº¹ç†æ¸å˜èåˆ">ç»†èŠ‚çº¹ç†æ¸å˜èåˆ</a><li><a href="#çº¿æ€§è‰²å½©ç©ºé—´" id="markdown-toc-çº¿æ€§è‰²å½©ç©ºé—´">çº¿æ€§è‰²å½©ç©ºé—´</a><li><a href="#ä»€ä¹ˆæ˜¯gammaè‰²å½©ç©ºé—´" id="markdown-toc-ä»€ä¹ˆæ˜¯gammaè‰²å½©ç©ºé—´">ä»€ä¹ˆæ˜¯gammaè‰²å½©ç©ºé—´?</a></ul><li><a href="#çº¹ç†splatè¿‡æ¸¡é®ç½©" id="markdown-toc-çº¹ç†splatè¿‡æ¸¡é®ç½©">çº¹ç†splatè¿‡æ¸¡é®ç½©</a><ul><li><a href="#å¢åŠ èåˆçº¹ç†" id="markdown-toc-å¢åŠ èåˆçº¹ç†">å¢åŠ èåˆçº¹ç†</a><li><a href="#ä½¿ç”¨splatè´´å›¾" id="markdown-toc-ä½¿ç”¨splatè´´å›¾">ä½¿ç”¨splatè´´å›¾</a><li><a href="#rgb-splatè´´å›¾" id="markdown-toc-rgb-splatè´´å›¾">RGB Splatè´´å›¾</a></ul></ul><p>æœ¬ç¯‡æ‘˜è¦ï¼š</p><ul><li>é‡‡æ ·å¤šä¸ªçº¹ç†<li>åº”ç”¨ç»†èŠ‚çº¹ç†<li>å¤„ç†çº¿æ€§ç©ºé—´ä¸­çš„é¢œè‰²<li>ä½¿ç”¨ splat åœ°å›¾</ul><h2 id="çº¹ç†åˆå¹¶">çº¹ç†åˆå¹¶</h2><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/tutorial-image.jpg" width="500" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>èåˆå¤šå¼ çº¹ç†.</a></i></center> </font><p>è´´å›¾åœ¨æ¸¸æˆåº”ç”¨å¹¿æ³›ï¼Œä½†å®ƒä»¬æœ‰å±€é™æ€§ã€‚æ— è®ºä»¥ä½•ç§å°ºå¯¸æ˜¾ç¤ºï¼Œå®ƒä»¬éƒ½æœ‰å›ºå®šæ•°é‡çš„åƒç´ ã€‚å¦‚æœéœ€è¦è¢«æ¸²æŸ“åˆ°å¾ˆå°ç½‘æ ¼ï¼Œå¯ä»¥ä½¿ç”¨mipmapæ¥ä¿æŒå®ƒä»¬çš„éƒ¨åˆ†ç»†èŠ‚ã€‚ä½†æ˜¯å½“æ¸²æŸ“åˆ°å¾ˆå¤§çš„ç½‘æ ¼ä¸Šï¼Œä¼šå˜å¾—æ¨¡ç³Šã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½æ— ä¸­ç”Ÿæœ‰åœ°æ¸²æŸ“æ›´å¤šé¢å¤–çš„ç»†èŠ‚ã€‚æœ¬æ–‡è®¨è®ºäº†ä¸€äº›è§£å†³åŠæ³•ã€‚</p><h3 id="ç»†èŠ‚çº¹ç†">ç»†èŠ‚çº¹ç†</h3><p>é€šå¸¸å¯ä»¥ä½¿ç”¨æ›´å¤§çš„çº¹ç†ï¼Œæ„å‘³ç€æ›´å¤šçš„åƒç´ å’Œæ›´å¤šçš„ç»†èŠ‚ã€‚ä½†æ˜¯çº¹ç†çš„å¤§å°ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œå–å†³äºæ¸¸æˆåŒ…ä½“å¤§å°å’Œç›®æ ‡å¹³å°çš„å†…å­˜ï¼Œä»¥åŠgpué‡‡æ ·èƒ½åŠ›ã€‚</p><p>å¦ä¸€ç§å¢åŠ åƒç´ å¯†åº¦çš„æ–¹æ³•æ˜¯å¹³é“ºçº¹ç†ã€‚å‡ºä¸€å¼ å°½å¯èƒ½å°çš„è´´å›¾ï¼Œè®¾ç½®ä¸ºé‡å¤æ¨¡å¼ã€‚è¿‘è·ç¦»è§‚å¯Ÿä¸‹é‡å¤æ„Ÿå¯èƒ½ä¸ä¼šå¾ˆæ˜æ˜¾ã€‚æ¯•ç«Ÿå½“ä½ ç«™ç€ç”¨é¼»å­æ¥è§¦å¢™å£æ—¶ï¼Œä½ åªä¼šçœ‹åˆ°æ•´é¢å¢™å£çš„ä¸€å°éƒ¨åˆ†ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡æ‹‰ä¼¸ä¸å¹³é“ºçº¹ç†ç›¸ç»“åˆçš„æ–¹å¼æ¥å°½å¯èƒ½åœ°æ·»åŠ ç»†èŠ‚ã€‚ä¸ºäº†å°è¯•è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å¼ æ£±è§’æ˜æ˜¾çš„çº¹ç†ã€‚è¿™æ˜¯ä¸€ä¸ªæ–¹æ ¼å›¾ï¼Œæ”¾å…¥çš„å·¥ç¨‹å†…ä½¿ç”¨é»˜è®¤å¯¼å…¥è®¾ç½®ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>ç•¥å¾®æ‰­æ›²çš„ç½‘æ ¼çº¹ç†.</a></i></center> </font><p>æ–°å»ºä¸€ä¸ªçº¹ç†èåˆshader</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Custom/Textured With Detail"</span> <span class="p">{</span>
    <span class="n">Properties</span> <span class="p">{</span>
        <span class="n">_Tint</span> <span class="p">(</span><span class="s">"Tint"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="n">SubShader</span> <span class="p">{</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>ä½¿ç”¨æ­¤ç€è‰²å™¨åˆ›å»ºä¸€ä¸ªæ–°æè´¨ï¼Œç„¶åä¸ºå…¶æŒ‡å®šè¯¥shaderå’Œç½‘æ ¼çº¹ç†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/detailed-inspector.png" width="300" alt="loading failed, need vpn." /></center> <center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/detailed-scene.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>ç½‘æ ¼çº¹ç†.</a></i></center> </font><p>å°†æè´¨åˆ†é…ç»™quadå¹¶æŸ¥çœ‹å®ƒã€‚ä»è¿œå¤„çœ‹æ•ˆæœè¿˜è¡Œã€‚ä½†æ˜¯é å¾—å¤ªè¿‘çœ‹ä¼šå˜å¾—æ¨¡ç³Šä¸æ¸…ã€‚ç¼ºå¤±ä¸€äº›ç»†èŠ‚ï¼ŒåŒæ—¶çº¹ç†å‹ç¼©é€ æˆçš„ä¼ªå½±ä¹Ÿä¼šå˜å¾—å¾ˆæ˜æ˜¾ã€‚ ç½‘æ ¼ç‰¹å†™ï¼Œæ˜¾ç¤ºä½çº¹ç´ å¯†åº¦å’Œ DXT1 ä¼ªå½±ã€‚ å¤šä¸ªçº¹ç†æ ·æœ¬</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid-close-up.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¸¦æœ‰ä½åƒç´ å¯†åº¦å’ŒDXT1ä¼ªå½±.</a></i></center> </font><h3 id="å¤šå¼ çº¹ç†è´´å›¾é‡‡æ ·">å¤šå¼ çº¹ç†è´´å›¾é‡‡æ ·</h3><p>ç°åœ¨æˆ‘ä»¬åªé‡‡æ ·äº†å•ä¸ªçº¹ç†æ ·æœ¬å¹¶å°†å…¶ç”¨ä½œç‰‡æ®µç€è‰²å™¨çš„ç»“æœï¼Œå°†é‡‡æ ·çš„é¢œè‰²å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="nf">MyFragmentProgram</span> <span class="p">(</span><span class="n">Interpolators</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span> <span class="p">{</span>
    <span class="kt">float4</span> <span class="n">color</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">color</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>å…ˆå‡è®¾å¯ä»¥é€šè¿‡å¼•å…¥å¹³é“ºçº¹ç†çš„æ–¹å¼æ¥å¢åŠ åƒç´ å¯†åº¦ã€‚æ‰§è¡Œä¸€æ¬¡çº¹ç†é‡‡æ ·å‡½æ•°ï¼Œç»™å®ƒä¸€ä¸ªåå€é‡‡æ ·é¢ç§¯ï¼Œç”¨è¿™ä¸ªç»“æœæ›¿æ¢ä¸´æ—¶å­˜å‚¨çš„é¢œè‰²åŸæ¥çš„é¢œè‰²è¾“å‡ºåˆ°å±å¹•ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="n">color</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
<span class="n">color</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">return</span> <span class="n">color</span><span class="p">;</span>
</code></pre></div></div><p>å±å¹•ä¸Šä¼šäº§ç”Ÿå¾ˆå¤šå°ç½‘æ ¼ã€‚é çš„å¾ˆè¿‘å†è§‚å¯Ÿï¼Œç»“æœä¸é‚£ä¹ˆç³Ÿç³•äº†ã€‚å› ä¸ºé‡‡æ ·çº¹ç†ç”¨äº†å¹³é“º10æ¬¡ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ªé‡å¤çš„å›¾æ¡ˆã€‚ ç¡¬ç¼–ç å¹³é“ºã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/tiling.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¹³é“ºçº¹ç†.</a></i></center> </font><p>è¯·æ³¨æ„ï¼Œæ­¤æ—¶æˆ‘ä»¬æ­£åœ¨æ‰§è¡Œä¸¤ä¸ªçº¹ç†é‡‡æ ·ï¼Œä½†æœ€ç»ˆå´åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªã€‚è¿™ä¼¼ä¹å¾ˆæµªè´¹ã€‚æ˜¯å—ï¼Ÿçœ‹çœ‹ç¼–è¯‘çš„é¡¶ç‚¹ç¨‹åºã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">uniform</span>  <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">vs_TEXCOORD0</span><span class="p">;</span>
<span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">out</span> <span class="n">vec4</span> <span class="n">SV_TARGET0</span><span class="p">;</span>
<span class="n">vec2</span> <span class="n">t0</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">t0</span><span class="p">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="n">vec2</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">SV_TARGET0</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SetTexture</span> <span class="mi">0</span> <span class="p">[</span><span class="n">_MainTex</span><span class="p">]</span> <span class="mi">2</span><span class="n">D</span> <span class="mi">0</span>
      <span class="n">ps_4_0</span>
      <span class="n">dcl_sampler</span> <span class="n">s0</span><span class="p">,</span> <span class="n">mode_default</span>
      <span class="n">dcl_resource_texture2d</span> <span class="p">(</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">)</span> <span class="n">t0</span>
      <span class="n">dcl_input_ps</span> <span class="k">linear</span> <span class="n">v0</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_output</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span>
      <span class="n">dcl_temps</span> <span class="mi">1</span>
   <span class="mi">0</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xy</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">l</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mo">000000</span><span class="p">)</span>
   <span class="mi">1</span><span class="o">:</span> <span class="k">sample</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s0</span>
   <span class="mi">2</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div></div><p>æ˜¯å¦æ³¨æ„åˆ°ç¼–è¯‘åçš„ä»£ç ä¸­åªæœ‰ä¸€ä¸ªçº¹ç†é‡‡æ ·ï¼Ÿæ²¡é”™ï¼Œç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬å»æ‰äº†ä¸å¿…è¦çš„ä»£ç ï¼ç¼–è¯‘å™¨åŸºæœ¬ä¸Šä¼šä¸¢å¼ƒä»»ä½•æœ€ç»ˆæœªä½¿ç”¨çš„å†…å®¹ã€‚</p><p>æˆ‘ä»¬ä¸æƒ³ä¸¢å¼ƒåŸå§‹é‡‡æ ·åˆ°é¢œè‰²ï¼Œå°±è¦åˆå¹¶ä¸¤æ¬¡é‡‡æ ·ç»“æœã€‚è®©æˆ‘ä»¬é€šè¿‡å°†å®ƒä»¬ç›¸ä¹˜æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å†æ·»åŠ ä¸€ä¸ª_Tintå±æ€§ï¼Œå åŠ ä¸€å±‚è‡ªå®šä¹‰é¢œè‰²ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="n">color</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
<span class="n">color</span> <span class="o">*=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
<span class="k">return</span> <span class="n">color</span><span class="p">;</span>
</code></pre></div></div><p>ç€è‰²ç¼–è¯‘å™¨ä¼šç”Ÿæˆä»€ä¹ˆæ ·çš„ä»£ç å‘¢ï¼Œå¯¹æ­¤æœ‰ä½•å½±å“ï¼Ÿ</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">uniform</span>  <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">vs_TEXCOORD0</span><span class="p">;</span>
<span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">out</span> <span class="n">vec4</span> <span class="n">SV_TARGET0</span><span class="p">;</span>
<span class="n">mediump</span> <span class="n">vec4</span> <span class="n">t16_0</span><span class="p">;</span>
<span class="n">lowp</span> <span class="n">vec4</span> <span class="n">t10_0</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">t10_0</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="n">t16_0</span> <span class="o">=</span> <span class="n">t10_0</span> <span class="o">*</span> <span class="n">t10_0</span><span class="p">;</span>
    <span class="n">SV_TARGET0</span> <span class="o">=</span> <span class="n">t16_0</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SetTexture</span> <span class="mi">0</span> <span class="p">[</span><span class="n">_MainTex</span><span class="p">]</span> <span class="mi">2</span><span class="n">D</span> <span class="mi">0</span>
<span class="n">ConstBuffer</span> <span class="s">"$Globals"</span> <span class="mi">144</span>
<span class="n">Vector</span> <span class="mi">96</span> <span class="p">[</span><span class="n">_Tint</span><span class="p">]</span>
<span class="n">BindCB</span>  <span class="s">"$Globals"</span> <span class="mi">0</span>
      <span class="n">ps_4_0</span>
      <span class="n">dcl_constantbuffer</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">immediateIndexed</span>
      <span class="n">dcl_sampler</span> <span class="n">s0</span><span class="p">,</span> <span class="n">mode_default</span>
      <span class="n">dcl_resource_texture2d</span> <span class="p">(</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">)</span> <span class="n">t0</span>
      <span class="n">dcl_input_ps</span> <span class="k">linear</span> <span class="n">v0</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_output</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span>
      <span class="n">dcl_temps</span> <span class="mi">1</span>
   <span class="mi">0</span><span class="o">:</span> <span class="k">sample</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s0</span>
   <span class="mi">1</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">2</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">xyzw</span>
   <span class="mi">3</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div></div><p>è¿™æ¬¡çš„çº¹ç†é‡‡æ ·ï¼Œç¼–è¯‘å™¨æ£€æµ‹åˆ°é‡å¤å¯¹_MainTexé‡‡æ ·ä»£ç ã€‚å¯¹å…¶è¿›è¡Œä¼˜åŒ–åçº¹ç†åªé‡‡æ ·ä¸€æ¬¡ï¼Œç»“æœå­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­å¹¶é‡å¤ä½¿ç”¨ã€‚å³ä½¿ä½¿ç”¨_Tintä¸­é—´å˜é‡ç­‰ï¼Œç¼–è¯‘å™¨ä¹Ÿè¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥æ£€æµ‹åˆ°æ­¤ç±»ä»£ç é‡å¤ã€‚æœ€ç»ˆå°†æ‰€æœ‰ç»“æœæ±‡æ€»åè¾“å‡ºã€‚</p><p>ç°åœ¨å†å¯¹UVåæ ‡å¹³é“ºÃ—10æ¬¡ï¼Œæœ€ç»ˆçœ‹åˆ°å¤§ç½‘æ ¼å’Œå°ç½‘æ ¼çš„èåˆåœ¨ä¸€èµ·</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">color</span> <span class="o">*=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/multiplied.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¹³é“ºçº¹ç†.</a></i></center> </font><p>ç”±äºçº¹ç†é‡‡æ ·æ—¶å‚æ•°ä¸å†ç›¸åŒï¼Œç¼–è¯‘å™¨ä¹Ÿå¿…é¡»ä¿ç•™ä¸¤æ¬¡é‡‡æ ·ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">uniform</span>  <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">vs_TEXCOORD0</span><span class="p">;</span>
<span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">out</span> <span class="n">vec4</span> <span class="n">SV_TARGET0</span><span class="p">;</span>
<span class="n">vec4</span> <span class="n">t0</span><span class="p">;</span>
<span class="n">lowp</span> <span class="n">vec4</span> <span class="n">t10_0</span><span class="p">;</span>
<span class="n">vec2</span> <span class="n">t1</span><span class="p">;</span>
<span class="n">lowp</span> <span class="n">vec4</span> <span class="n">t10_1</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">t10_0</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">t10_0</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
    <span class="n">t1</span><span class="p">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="n">vec2</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">t10_1</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">t1</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="n">SV_TARGET0</span> <span class="o">=</span> <span class="n">t0</span> <span class="o">*</span> <span class="n">t10_1</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SetTexture</span> <span class="mi">0</span> <span class="p">[</span><span class="n">_MainTex</span><span class="p">]</span> <span class="mi">2</span><span class="n">D</span> <span class="mi">0</span>
<span class="n">ConstBuffer</span> <span class="s">"$Globals"</span> <span class="mi">144</span>
<span class="n">Vector</span> <span class="mi">96</span> <span class="p">[</span><span class="n">_Tint</span><span class="p">]</span>
<span class="n">BindCB</span>  <span class="s">"$Globals"</span> <span class="mi">0</span>
      <span class="n">ps_4_0</span>
      <span class="n">dcl_constantbuffer</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">immediateIndexed</span>
      <span class="n">dcl_sampler</span> <span class="n">s0</span><span class="p">,</span> <span class="n">mode_default</span>
      <span class="n">dcl_resource_texture2d</span> <span class="p">(</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">)</span> <span class="n">t0</span>
      <span class="n">dcl_input_ps</span> <span class="k">linear</span> <span class="n">v0</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_output</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span>
      <span class="n">dcl_temps</span> <span class="mi">2</span>
   <span class="mi">0</span><span class="o">:</span> <span class="k">sample</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s0</span>
   <span class="mi">1</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">xyzw</span>
   <span class="mi">2</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r1</span><span class="p">.</span><span class="n">xy</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">l</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mo">000000</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mo">000000</span><span class="p">)</span>
   <span class="mi">3</span><span class="o">:</span> <span class="k">sample</span> <span class="n">r1</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r1</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s0</span>
   <span class="mi">4</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r1</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">5</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div></div><h3 id="å•ç‹¬çš„ç»†èŠ‚çº¹ç†">å•ç‹¬çš„ç»†èŠ‚çº¹ç†</h3><p>å°†ä¸¤ä¸ªçº¹ç†ç›¸ä¹˜æ—¶ï¼Œç»“æœä¼šæ›´æš—ã€‚é™¤éè‡³å°‘å…¶ä¸­ä¸€ç§çº¹ç†æ˜¯ç™½è‰²çš„ã€‚è¿™æ˜¯å› ä¸ºåƒç´ çš„æ¯ä¸ªé¢œè‰²é€šé“éƒ½æœ‰ä¸€ä¸ªä»‹äº 0 å’Œ 1 ä¹‹é—´çš„å€¼ã€‚å½“å‘çº¹ç†æ·»åŠ ç»†èŠ‚æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥é€šé“å€¼æ¥å®ç°å˜æš—æˆ–å˜äº®ã€‚</p><p>è¦ä½¿åŸå§‹çº¹ç†å˜äº®ï¼Œç»™åŸå§‹é¢œè‰²ä¹˜2ï¼Œä½¿å¾—æ¯ä¸ªé¢œè‰²å€¼éƒ½å¢å¤§ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">color</span> <span class="o">*=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/doubled.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¢äº®é¢œè‰².</a></i></center> </font><p>è¿™ç§ç›´æ¥æ‰©å¤§å€æ•°çš„åšæ³•å¾ˆç²—æš´ã€‚æˆ‘ä»¬çŸ¥é“ä»»ä½•æ•°ä¹˜ä»¥1ä¸å˜ï¼Œä½†æ˜¯å¯¹ç»†èŠ‚çº¹ç†è‰²åŠ å€æ—¶ï¼Œä½†å¯¹äº1/2è¿™ä¸ªåˆ†ç•Œå€¼å°±æœ‰ç”¨äº†ã€‚é¢œè‰²åŒºé—´æ˜¯0-1ï¼Œä½äº1/2çš„å€¼å°†æ˜¯ç»“æœå˜æš—ï¼Œé«˜äº1/2çš„å€¼å°†å˜äº®ã€‚è¿™é‡Œå¼•å…¥ä¸€å¼ ç‰¹æ®Šçš„ç°åº¦ç»†èŠ‚çº¹ç†æ¥å¤„ç†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid-detail.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>ç»†èŠ‚ç°åº¦å›¾.</a></i></center> </font><blockquote class="prompt-tip"><p>ç°åº¦ç»†èŠ‚çº¹ç†ï¼Ÿ</p><p>ä¸€èˆ¬éƒ½æ˜¯ç”¨ç°åº¦ç»†èŠ‚çº¹ç†æ¥å¢ç™½æˆ–åŠ æ·±åŸå§‹é¢œè‰²åšäºŒæ¬¡ç»†èŠ‚è°ƒæ•´ï¼Œä¸æ˜¯ç°åº¦å›¾è·³å‡º çš„é¢œè‰²ä¸æ˜¯é‚£ä¹ˆç›´è§‚çš„ç»“æœã€‚</p></blockquote><p>è¦ä½¿ç”¨è¿™ä¸ªå•ç‹¬çš„ç»†èŠ‚çº¹ç†ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç€è‰²å™¨ä¸­æ·»åŠ ç¬¬äºŒä¸ªçº¹ç†å±æ€§ã€‚ä½¿ç”¨ç°è‰²ä½œä¸ºé»˜è®¤å€¼ï¼Œå› ä¸ºè¿™ä¸ä¼šæ”¹å˜ä¸»çº¹ç†çš„å¤–è§‚ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Properties</span> <span class="p">{</span>
    <span class="n">_Tint</span> <span class="p">(</span><span class="s">"Tint"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="n">_DetailTex</span> <span class="p">(</span><span class="s">"Detail Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"gray"</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div><p>å°†ç»†èŠ‚çº¹ç†åˆ†é…ç»™æˆ‘ä»¬çš„æè´¨å¹¶å°†å…¶å¹³é“ºè®¾ç½®ä¸º10ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/detail-texture-inspector.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>ä¸¤ç§çº¹ç†.</a></i></center> </font><p>æˆ‘ä»¬å¿…é¡»æ·»åŠ å˜é‡æ¥è®¿é—®ç»†èŠ‚çº¹ç†åŠå…¶å¹³é“ºå’Œåç§»æ•°æ®</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">,</span> <span class="n">_DetailTex</span><span class="p">;</span>
<span class="kt">float4</span> <span class="n">_MainTex_ST</span><span class="p">,</span> <span class="n">_DetailTex_ST</span><span class="p">;</span>
</code></pre></div></div><h3 id="ä½¿ç”¨ä¸¤ä¸ªuv">ä½¿ç”¨ä¸¤ä¸ªUV</h3><p>æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ç»†èŠ‚çº¹ç†çš„å¹³é“ºå’Œåç§»æ•°æ®ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç¡¬ç¼–ç ä¹˜10ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Interpolators</span> <span class="p">{</span>
  <span class="kt">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="nb">SV_POSITION</span><span class="p">;</span>
  <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
  <span class="kt">float2</span> <span class="n">uvDetail</span> <span class="o">:</span> <span class="nb">TEXCOORD1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>é€šè¿‡ä½¿ç”¨ä¸»çº¹ç†uvå¯¹ç»†èŠ‚çº¹ç†è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ç»†èŠ‚çº¹ç†uvã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Interpolators</span> <span class="nf">MyVertexProgram</span> <span class="p">(</span><span class="n">VertexData</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Interpolators</span> <span class="n">i</span><span class="p">;</span>
  <span class="n">i</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">UNITY_MATRIX_MVP</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
  <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_MainTex</span><span class="p">);</span>
  <span class="n">i</span><span class="p">.</span><span class="n">uvDetail</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_DetailTex</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>å†ä¸€æ¬¡çœ‹çœ‹æ±‡ç¼–ä»£ç </p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_Tint</span><span class="p">;</span>
<span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>
<span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_DetailTex_ST</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec4</span> <span class="n">in_POSITION0</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">in_TEXCOORD0</span><span class="p">;</span>
<span class="k">out</span> <span class="n">vec2</span> <span class="n">vs_TEXCOORD0</span><span class="p">;</span>
<span class="k">out</span> <span class="n">vec2</span> <span class="n">vs_TEXCOORD1</span><span class="p">;</span>
<span class="n">vec4</span> <span class="n">t0</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">in_POSITION0</span><span class="p">.</span><span class="n">yyyy</span> <span class="o">*</span> <span class="n">glstate_matrix_mvp</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">glstate_matrix_mvp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">in_POSITION0</span><span class="p">.</span><span class="n">xxxx</span> <span class="o">+</span> <span class="n">t0</span><span class="p">;</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">glstate_matrix_mvp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">in_POSITION0</span><span class="p">.</span><span class="n">zzzz</span> <span class="o">+</span> <span class="n">t0</span><span class="p">;</span>
    <span class="n">gl_Position</span> <span class="o">=</span> <span class="n">glstate_matrix_mvp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">in_POSITION0</span><span class="p">.</span><span class="n">wwww</span> <span class="o">+</span> <span class="n">t0</span><span class="p">;</span>
    <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">in_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="n">_MainTex_ST</span><span class="p">.</span><span class="n">xy</span> <span class="o">+</span> <span class="n">_MainTex_ST</span><span class="p">.</span><span class="n">zw</span><span class="p">;</span>
    <span class="n">vs_TEXCOORD1</span><span class="p">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">in_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="n">_DetailTex_ST</span><span class="p">.</span><span class="n">xy</span> <span class="o">+</span> <span class="n">_DetailTex_ST</span><span class="p">.</span><span class="n">zw</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span> <span class="mi">112</span> <span class="p">[</span><span class="n">_MainTex_ST</span><span class="p">]</span>
<span class="n">Vector</span> <span class="mi">128</span> <span class="p">[</span><span class="n">_DetailTex_ST</span><span class="p">]</span>
<span class="n">ConstBuffer</span> <span class="s">"UnityPerDraw"</span> <span class="mi">352</span>
<span class="n">Matrix</span> <span class="mi">0</span> <span class="p">[</span><span class="n">glstate_matrix_mvp</span><span class="p">]</span>
<span class="n">BindCB</span>  <span class="s">"$Globals"</span> <span class="mi">0</span>
<span class="n">BindCB</span>  <span class="s">"UnityPerDraw"</span> <span class="mi">1</span>
      <span class="n">vs_4_0</span>
      <span class="n">dcl_constantbuffer</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">immediateIndexed</span>
      <span class="n">dcl_constantbuffer</span> <span class="n">cb1</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">immediateIndexed</span>
      <span class="n">dcl_input</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyzw</span>
      <span class="n">dcl_input</span> <span class="n">v1</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_output_siv</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">position</span>
      <span class="n">dcl_output</span> <span class="n">o1</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_output</span> <span class="n">o1</span><span class="p">.</span><span class="n">zw</span>
      <span class="n">dcl_temps</span> <span class="mi">1</span>
   <span class="mi">0</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">yyyy</span><span class="p">,</span> <span class="n">cb1</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">xyzw</span>
   <span class="mi">1</span><span class="o">:</span> <span class="nb">mad</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb1</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xxxx</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">2</span><span class="o">:</span> <span class="nb">mad</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb1</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">zzzz</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">3</span><span class="o">:</span> <span class="nb">mad</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb1</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">wwww</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">4</span><span class="o">:</span> <span class="nb">mad</span> <span class="n">o1</span><span class="p">.</span><span class="n">xy</span><span class="p">,</span> <span class="n">v1</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">zwzz</span>
   <span class="mi">5</span><span class="o">:</span> <span class="nb">mad</span> <span class="n">o1</span><span class="p">.</span><span class="n">zw</span><span class="p">,</span> <span class="n">v1</span><span class="p">.</span><span class="n">xxxy</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">xxxy</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">zzzw</span>
   <span class="mi">6</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div></div><p>æ³¨æ„ä¸¤ä¸ª UV è¾“å‡ºæ˜¯å¦‚ä½•åœ¨ä¸¤ä¸ªç¼–è¯‘å™¨é¡¶ç‚¹ç¨‹åºä¸­å®šä¹‰çš„ã€‚OpenGLCoreä½¿ç”¨vs_TEXCOORD0å’Œvs_TEXCOORD1è¾“å‡ºï¼Œç›¸åDirect3D11åªä½¿ç”¨ä¸€ä¸ªè¾“å‡ºo1.</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Output signature:</span>
<span class="c1">//</span>
<span class="c1">// Name                 Index   Mask Register SysValue  Format   Used</span>
<span class="c1">// -- --  -- -- - </span>
<span class="c1">// SV_POSITION              0   xyzw        0      POS   float   xyzw</span>
<span class="c1">// TEXCOORD                 0   xy          1     NONE   float   xy  </span>
<span class="c1">// TEXCOORD                 1     zw        1     NONE   float     zw</span>
</code></pre></div></div><p>ä¸Šé¢ä»£ç æ„å‘³ç€ä¸¤ä¸ª UV å¯¹éƒ½è¢«æ‰“åŒ…åˆ°ä¸€ä¸ªè¾“å‡ºå¯„å­˜å™¨ä¸­ã€‚ç¬¬ä¸€ä¸ªåœ¨ X å’Œ Y é€šé“ï¼Œç¬¬äºŒä¸ªåœ¨ Z å’Œ W é€šé“ã€‚å› ä¸ºå¯„å­˜å™¨æ€»æ˜¯ç”±å››ä¸ªæ•°å­—ç»„æˆçš„ç»„ã€‚Direct3D 11 ç¼–è¯‘å™¨åˆ©ç”¨äº†è¿™ä¸€ç‚¹ã€‚</p><blockquote class="prompt-tip"><p>è¯•ç€æ‰‹åŠ¨æ‰“åŒ…è¾“å‡º? æ‰‹åŠ¨æ‰“åŒ…è¾“å‡ºçš„å¸¸è§åŸå› æ˜¯åªæœ‰å°‘æ•°å‡ ä¸ªæ’å€¼å™¨å¯ç”¨ã€‚Shader Model 2ç¡¬ä»¶æ”¯æŒ8ä¸ªé€šç”¨æ’è¡¥ å™¨ï¼Œè€ŒShader Model 3ç¡¬ä»¶æ”¯æŒ10ä¸ªã€‚å¤æ‚ç€è‰²å™¨å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé™åˆ¶ã€‚</p></blockquote><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ç‰‡æ®µç¨‹åºä¸­ä½¿ç”¨é¢å¤–çš„UVå¯¹ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="nf">MyFragmentProgram</span> <span class="p">(</span><span class="n">Interpolators</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span> <span class="p">{</span>
	<span class="kt">float4</span> <span class="n">color</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
	<span class="n">color</span> <span class="o">*=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_DetailTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uvDetail</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">color</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_Tint</span><span class="p">;</span>
<span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>
<span class="k">uniform</span> 	<span class="n">vec4</span> <span class="n">_DetailTex_ST</span><span class="p">;</span>
<span class="k">uniform</span>  <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
<span class="k">uniform</span>  <span class="n">sampler2D</span> <span class="n">_DetailTex</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">vs_TEXCOORD0</span><span class="p">;</span>
<span class="k">in</span>  <span class="n">vec2</span> <span class="n">vs_TEXCOORD1</span><span class="p">;</span>
<span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">out</span> <span class="n">vec4</span> <span class="n">SV_TARGET0</span><span class="p">;</span>
<span class="n">vec4</span> <span class="n">t0</span><span class="p">;</span>
<span class="n">lowp</span> <span class="n">vec4</span> <span class="n">t10_0</span><span class="p">;</span>
<span class="n">lowp</span> <span class="n">vec4</span> <span class="n">t10_1</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">t10_0</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">vs_TEXCOORD0</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">t10_0</span> <span class="o">*</span> <span class="n">_Tint</span><span class="p">;</span>
    <span class="n">t10_1</span> <span class="o">=</span> <span class="k">texture</span><span class="p">(</span><span class="n">_DetailTex</span><span class="p">,</span> <span class="n">vs_TEXCOORD1</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">t0</span> <span class="o">*</span> <span class="n">t10_1</span><span class="p">;</span>
    <span class="n">SV_TARGET0</span> <span class="o">=</span> <span class="n">t0</span> <span class="o">+</span> <span class="n">t0</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SetTexture</span> <span class="mi">0</span> <span class="p">[</span><span class="n">_MainTex</span><span class="p">]</span> <span class="mi">2</span><span class="n">D</span> <span class="mi">0</span>
<span class="n">SetTexture</span> <span class="mi">1</span> <span class="p">[</span><span class="n">_DetailTex</span><span class="p">]</span> <span class="mi">2</span><span class="n">D</span> <span class="mi">1</span>
<span class="n">ConstBuffer</span> <span class="s">"$Globals"</span> <span class="mi">144</span>
<span class="n">Vector</span> <span class="mi">96</span> <span class="p">[</span><span class="n">_Tint</span><span class="p">]</span>
<span class="n">BindCB</span>  <span class="s">"$Globals"</span> <span class="mi">0</span>
      <span class="n">ps_4_0</span>
      <span class="n">dcl_constantbuffer</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">immediateIndexed</span>
      <span class="n">dcl_sampler</span> <span class="n">s0</span><span class="p">,</span> <span class="n">mode_default</span>
      <span class="n">dcl_sampler</span> <span class="n">s1</span><span class="p">,</span> <span class="n">mode_default</span>
      <span class="n">dcl_resource_texture2d</span> <span class="p">(</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">)</span> <span class="n">t0</span>
      <span class="n">dcl_resource_texture2d</span> <span class="p">(</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">,</span><span class="n">float</span><span class="p">)</span> <span class="n">t1</span>
      <span class="n">dcl_input_ps</span> <span class="k">linear</span> <span class="n">v0</span><span class="p">.</span><span class="n">xy</span>
      <span class="n">dcl_input_ps</span> <span class="k">linear</span> <span class="n">v0</span><span class="p">.</span><span class="n">zw</span>
      <span class="n">dcl_output</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span>
      <span class="n">dcl_temps</span> <span class="mi">2</span>
   <span class="mi">0</span><span class="o">:</span> <span class="k">sample</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">xyxx</span><span class="p">,</span> <span class="n">t0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s0</span>
   <span class="mi">1</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">cb0</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">xyzw</span>
   <span class="mi">2</span><span class="o">:</span> <span class="k">sample</span> <span class="n">r1</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">v0</span><span class="p">.</span><span class="n">zwzz</span><span class="p">,</span> <span class="n">t1</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">s1</span>
   <span class="mi">3</span><span class="o">:</span> <span class="nb">mul</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r1</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">4</span><span class="o">:</span> <span class="n">add</span> <span class="n">o0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span><span class="p">,</span> <span class="n">r0</span><span class="p">.</span><span class="n">xyzw</span>
   <span class="mi">5</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div></div><p>åŸºäºç»†èŠ‚çº¹ç†ï¼Œä¸»çº¹ç†å˜å¾—æ›´äº®å’Œæ›´æš—ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid-with-detail.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid-close-up-detail.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>æ˜æš—ä¸¤å¼ çº¹ç†.</a></i></center> </font><h3 id="ç»†èŠ‚çº¹ç†æ¸å˜èåˆ">ç»†èŠ‚çº¹ç†æ¸å˜èåˆ</h3><p>æ·»åŠ ç»†èŠ‚çš„æƒ³æ³•æ˜¯å®ƒä»¬å¯ä»¥åœ¨è¿‘è·ç¦»æˆ–æ”¾å¤§æ—¶æ”¹å–„æè´¨çš„å¤–è§‚ã€‚å®ƒä»¬ä¸åº”è¯¥åœ¨è¿œå¤„å¯è§æˆ–ç¼©å°ï¼Œå› ä¸ºè¿™ä¼šä½¿å¹³é“ºå˜å¾—æ˜æ˜¾ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥éšç€çº¹ç†æ˜¾ç¤ºå°ºå¯¸çš„å‡å°è€Œæ·¡åŒ–ç»†èŠ‚ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ç»†èŠ‚çº¹ç†æ·¡åŒ–ä¸ºç°è‰²æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºè¿™ä¸ä¼šå¯¼è‡´é¢œè‰²å˜åŒ–ã€‚</p><p>éœ€è¦åšçš„å°±æ˜¯åœ¨ç»†èŠ‚çº¹ç†çš„å¯¼å…¥è®¾ç½®ä¸­å¯ç”¨Fadeout Mip Mapså±æ€§ã€‚è¿™ä¹Ÿä¼šè‡ªåŠ¨å°†è¿‡æ»¤å™¨æ¨¡å¼åˆ‡æ¢ä¸ºä¸‰çº¿æ€§ï¼Œä»¥ä¾¿æ¸å˜ä¸ºç°è‰²æ˜¯æ¸è¿›çš„ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/fading-inspector.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/grid-fading-detail.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>çº¹ç†è¿‡æ¸¡.</a></i></center> </font><p>ç½‘æ ¼ä»è¯¦ç»†åˆ°ä¸è¯¦ç»†çš„è¿‡æ¸¡éå¸¸æ˜æ˜¾ï¼Œä½†é€šå¸¸ä¸ä¼šæ³¨æ„åˆ°å®ƒã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯å¤§ç†çŸ³æè´¨çš„ä¸»çº¹ç†å’Œç»†èŠ‚çº¹ç†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble-detail.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¤§ç†çŸ³çº¹ç†.</a></i></center> </font><p>ä¸€æ—¦æˆ‘ä»¬çš„æè´¨ä½¿ç”¨äº†è¿™äº›çº¹ç†ï¼Œç»†èŠ‚çº¹ç†çš„è¿‡æ¸¡ç—•è¿¹å°±ä¸å†æ˜æ˜¾äº†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble-inspector.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble-scene.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¤§ç†çŸ³æè´¨.</a></i></center> </font><p>ç„¶è€Œï¼Œç”±äºç»†èŠ‚çº¹ç†çš„è¿‡æ¸¡åŠ æŒï¼Œå¤§ç†çŸ³æè´¨åœ¨è¿‘è·ç¦»çœ‹èµ·æ¥è¦å¥½å¾—å¤šã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble-close.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/marble-close-detail.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>æ²¡æœ‰ç»†èŠ‚å’Œæœ‰ç»†èŠ‚ç‰¹å†™.</a></i></center> </font><h3 id="çº¿æ€§è‰²å½©ç©ºé—´">çº¿æ€§è‰²å½©ç©ºé—´</h3><p>å½“æˆ‘ä»¬åœ¨ gamma é¢œè‰²ç©ºé—´ä¸­æ¸²æŸ“åœºæ™¯æ—¶ï¼Œæˆ‘ä»¬çš„ç€è‰²å™¨å·¥ä½œæ­£å¸¸ï¼Œä½†å¦‚æœæˆ‘ä»¬åˆ‡æ¢åˆ°çº¿æ€§é¢œè‰²ç©ºé—´ï¼Œå®ƒå°±ä¼šå‡ºé”™ã€‚è‰²å½©ç©ºé—´åœ¨é¡¹ç›®ä¸­è®¾ç½®ã€‚å®ƒé…ç½®åœ¨Other Settingsæ’­æ”¾å™¨è®¾ç½®é¢æ¿ï¼Œå¯ä»¥é€šè¿‡Edit / Project Settings / Player.</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/color-space-inspector.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>é€‰æ‹©é¢œè‰²ç©ºé—´.</a></i></center> </font><h3 id="ä»€ä¹ˆæ˜¯gammaè‰²å½©ç©ºé—´">ä»€ä¹ˆæ˜¯gammaè‰²å½©ç©ºé—´?</h3><p>ä¼½ç›ç©ºé—´æ˜¯æŒ‡ç»è¿‡ä¼½ç›æ ¡æ­£çš„è‰²å½©ç©ºé—´ã€‚ä¼½ç›æ ¡æ­£æ˜¯å¯¹å…‰å¼ºåº¦çš„è°ƒæ•´ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†åŸå§‹å€¼æé«˜åˆ°æŸä¸ªå¹‚æ¬¡ï¼Œå³$value^gamma$ã€‚ gammaä¸º 1 è¡¨ç¤ºæ²¡æœ‰å˜åŒ–ï¼Œ éšç€gammaé€’å¢å…‰å¼ºåº¦é€’å¢ã€‚</p><p>è¿™ç§è½¬æ¢æœ€åˆæ˜¯ä¸ºäº†é€‚åº” CRT æ˜¾ç¤ºå™¨çš„éçº¿æ€§ç‰¹æ€§è€Œå¼•å…¥çš„ã€‚å¦ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒä¹Ÿå¤§è‡´å¯¹åº”äºæˆ‘ä»¬çš„çœ¼ç›å¯¹ä¸åŒå…‰å¼ºåº¦çš„æ•æ„Ÿç¨‹åº¦ã€‚æˆ‘ä»¬æ³¨æ„åˆ°æ·±è‰²ä¹‹é—´çš„å·®å¼‚æ¯”æ˜äº®é¢œè‰²ä¹‹é—´çš„å·®å¼‚æ›´å¤§ã€‚å› æ­¤ï¼Œå°†æ›´å¤šçš„æ•°å­—ä½åˆ†é…ç»™è¾ƒæš—çš„å€¼è€Œä¸æ˜¯è¾ƒæµ…çš„å€¼æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ±‚å¹‚è¿ç®—å…è®¸å°†è¾ƒä½çš„å€¼æ‰©å±•åˆ°æ›´å¤§çš„èŒƒå›´ï¼ŒåŒæ—¶å‹ç¼©è¾ƒé«˜çš„å€¼ã€‚</p><p>æœ€å¹¿æ³›ä½¿ç”¨çš„å›¾åƒé¢œè‰²æ ¼å¼æ˜¯sRGBã€‚å®ƒä½¿ç”¨æ¯”ç®€å•æ±‚å¹‚æ›´å¤æ‚çš„å…¬å¼ï¼ŒsRGBä»¥$1\over 2.2$çš„å¹³å‡gammaå€¼å­˜å‚¨é¢œè‰²ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿™æ˜¯ä¸€ä¸ªåˆç†çš„è¿‘ä¼¼å€¼ã€‚è¦å°†æ­¤æ•°æ®è½¬æ¢å›å…¶åŸå§‹é¢œè‰²ï¼Œè¯·2.2å¹‚çš„ä¼½é©¬æ ¡æ­£ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/liner-gama.png" width="400" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>gamma$1\over 2.2$encoding vs. $2.2$deconding.</a></i></center> </font><p>å‡è®¾Unityçº¹ç†çš„é¢œè‰²å­˜å‚¨ä¸ºsRGBã€‚åœ¨ä¼½é©¬ç©ºé—´ä¸­æ¸²æŸ“æ—¶ï¼Œç€è‰²å™¨ç›´æ¥è®¿é—®åŸå§‹é¢œè‰²å’Œçº¹ç†æ•°æ®ã€‚è¿™æ˜¯æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€å‡è®¾çš„ã€‚</p><p>ä½†æ˜¯åœ¨çº¿æ€§ç©ºé—´ä¸­æ¸²æŸ“æ—¶ï¼Œå°±ä¸å†é€‚ç”¨ã€‚ GPUä¼šå°†é‡‡æ ·çš„çº¹ç†é¢œè‰²è½¬æ¢ä¸ºçº¿æ€§ç©ºé—´ã€‚æ­¤å¤–ï¼ŒUnity ä¹Ÿä¼šå°†æè´¨é¢œè‰²å±æ€§è½¬æ¢ä¸ºçº¿æ€§ç©ºé—´ã€‚ç„¶åç€è‰²å™¨ä½¿ç”¨è¿™äº›çº¿æ€§é¢œè‰²è¿›è¡Œæ“ä½œã€‚ä¹‹åï¼Œç‰‡æ®µç¨‹åºçš„è¾“å‡ºå°†è¢«è½¬æ¢å›ä¼½é©¬ç©ºé—´ã€‚</p><p>ä½¿ç”¨çº¿æ€§é¢œè‰²çš„ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å®ƒå¯ä»¥å®ç°æ›´é€¼çœŸçš„ç…§æ˜è®¡ç®—ã€‚è¿™æ˜¯å› ä¸ºå…‰çš„ç›¸äº’ä½œç”¨åœ¨ç°å®ç”Ÿæ´»ä¸­æ˜¯çº¿æ€§çš„ï¼Œè€Œä¸æ˜¯æŒ‡æ•°çš„ã€‚ä¸å¹¸çš„æ˜¯,åˆ‡æ¢åˆ°çº¿æ€§ç©ºé—´åï¼Œç»†èŠ‚ææ–™å˜å¾—æ›´æš—ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/gamma-space.png" width="250" alt="loading failed, need vpn." /> <img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/linear-space.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>gama vs. linear è‰²å½©ç©ºé—´.</a></i></center> </font><p>å› ä¸ºæˆ‘ä»¬å°†ç»†èŠ‚çº¹ç†é‡‡æ ·åçš„é¢œè‰²ä¹˜äº†2ï¼Œæ‰€ä»¥$1\over 2$çš„å€¼ä¸ä¼šå¯¼è‡´ä¸»çº¹ç†å‘ç”Ÿä»»ä½•å˜åŒ–ã€‚ä½†æ˜¯ï¼Œè½¬æ¢ä¸ºçº¿æ€§ç©ºé—´åï¼Œå®ƒä¼šå˜ä¸ºæ¥è¿‘${1\over 2} ^{2.2} \approx 0.22$ã€‚åŠ å€å¤§çº¦æ˜¯0.44ï¼Œè¿œå°äº 1ã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå˜å¾—æ›´æš—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç»†èŠ‚çº¹ç†çš„å¯¼å…¥è®¾ç½®ä¸­å¯ç”¨<em>Bypass sRGB Sampling</em>æ¥è§£å†³è¿™ä¸ªé”™è¯¯ã€‚è¿™å¯ä»¥é˜²æ­¢ä»ä¼½ç›åˆ°çº¿æ€§ç©ºé—´çš„è½¬æ¢ï¼Œå› æ­¤ç€è‰²å™¨å°†å§‹ç»ˆè®¿é—®åŸå§‹å›¾åƒæ•°æ®ã€‚ä½†æ˜¯ï¼Œç»†èŠ‚çº¹ç†æ˜¯sRGBå›¾åƒï¼Œæ‰€ä»¥ç»“æœä»ç„¶æ˜¯é”™è¯¯çš„ã€‚</p><p>æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯é‡æ–°å¯¹é½ç»†èŠ‚é¢œè‰²ï¼Œä½¿å®ƒä»¬å†æ¬¡ä»¥ 1 ä¸ºä¸­å¿ƒã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡${1 \over {1\over 2} ^{2.2}} \approx 4.59$è€Œä¸æ˜¯ä¹˜ä»¥2æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä½†æˆ‘ä»¬åªèƒ½åœ¨çº¿æ€§ç©ºé—´ä¸­æ¸²æŸ“æ—¶æ‰è¿™æ ·è®¡ç®—ã€‚</p><p><em>UnityCG.cginc</em>å®šä¹‰äº†ä¸€ä¸ªç»Ÿä¸€å˜é‡ï¼Œå®ƒå°†åŒ…å«è¦ä¸ä¹‹ç›¸ä¹˜çš„æ­£ç¡®æ•°å­—ã€‚å®ƒæ˜¯ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">float4</code>ï¼Œå®ƒçš„ rgb åˆ†é‡æœ‰2æˆ–çº¦4.59ï¼Œè¿™ä¸¤ä¸ªå€¼è§†æƒ…å†µè€Œå®šã€‚ç”±äºä¼½é©¬æ ¡æ­£æœªåº”ç”¨äºAlphaé€šé“ï¼Œå› æ­¤å§‹ç»ˆä¸º2ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">color</span> <span class="o">*=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_DetailTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uvDetail</span><span class="p">)</span> <span class="o">*</span> <span class="n">unity_ColorSpaceDouble</span><span class="p">;</span>
</code></pre></div></div><p>é€šè¿‡è¿™ç§æ›´æ”¹ï¼Œæ— è®ºæˆ‘ä»¬åœ¨å“ªä¸ªé¢œè‰²ç©ºé—´ä¸­æ¸²æŸ“ï¼Œæˆ‘ä»¬çš„ç»†èŠ‚æè´¨çœ‹èµ·æ¥éƒ½ä¸€æ ·ã€‚</p><h2 id="çº¹ç†splatè¿‡æ¸¡é®ç½©">çº¹ç†splatè¿‡æ¸¡é®ç½©</h2><p>ç»†èŠ‚çº¹ç†çš„ä¸€ä¸ªé™åˆ¶æ˜¯å¯¹æ•´ä¸ªè¡¨é¢ä½¿ç”¨ç›¸åŒçš„ç»†èŠ‚ã€‚ è¿™é€‚ç”¨äºå‡åŒ€çš„è¡¨é¢ï¼Œå¦‚å¤§ç†çŸ³æ¿ã€‚ä½†æ˜¯ï¼Œå¦‚æœæè´¨æ²¡æœ‰ç»Ÿä¸€çš„å¤–è§‚ï¼Œä¸å¸Œæœ›åœ¨ä»»ä½•åœ°æ–¹éƒ½ä½¿ç”¨ç›¸åŒçš„ç»†èŠ‚ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªå¤§åœ°å½¢ã€‚å®ƒå¯ä»¥æœ‰è‰ã€æ²™ã€å²©çŸ³ã€é›ªç­‰ã€‚å¸Œæœ›è¿™äº›åœ°å½¢ç±»å‹æœ‰ä¸€å®šçš„ç»†èŠ‚ã€‚ä½†æ˜¯è¦†ç›–æ•´ä¸ªåœ°å½¢çš„çº¹ç†æ°¸è¿œä¸ä¼šæœ‰è¶³å¤Ÿçš„ç»†èŠ‚ã€‚å¯ä»¥é€šè¿‡ä¸ºæ¯ç§è¡¨é¢ç±»å‹ä½¿ç”¨å•ç‹¬çš„çº¹ç†å¹¶å¹³é“ºè¿™äº›çº¹ç†æ¥è§£å†³è¯¥é—®é¢˜ã€‚ä½†æ˜¯æ€ä¹ˆçŸ¥é“åœ¨å“ªé‡Œä½¿ç”¨å“ªç§çº¹ç†å‘¢ï¼Ÿ</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…·æœ‰ä¸¤ç§ä¸åŒè¡¨é¢ç±»å‹çš„åœ°å½¢ï¼Œä»€ä¹ˆæ—¶å€™å†³å®šä½¿ç”¨å“ªç§è¡¨é¢çº¹ç†å‘¢ã€‚ä¸æ˜¯ä¸€å°±æ˜¯äºŒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ¥è¡¨ç¤ºè¿™ä¸ªé€»è¾‘ã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ä¸ªçº¹ç†ï¼Œå¦åˆ™ä½¿ç”¨ç¬¬äºŒä¸ªã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°åº¦çº¹ç†æ¥å­˜å‚¨è¿™ä¸ªé€‰æ‹©ã€‚å€¼1è¡¨ç¤ºç¬¬ä¸€ä¸ªçº¹ç†ï¼Œè€Œå€¼0è¡¨ç¤ºç¬¬äºŒä¸ªçº¹ç†ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›å€¼åœ¨ä¸¤ä¸ªçº¹ç†ä¹‹é—´è¿›è¡Œçº¿æ€§æ’å€¼ã€‚ç„¶åä»‹äº 0 å’Œ 1 ä¹‹é—´çš„å€¼è¡¨ç¤ºä¸¤ç§çº¹ç†ä¹‹é—´çš„æ··åˆï¼Œè¿™ä½¿å¾—å¹³æ»‘è¿‡æ¸¡æˆä¸ºå¯èƒ½ã€‚</p><p>è¿™æ ·çš„çº¹ç†è¢«ç§°ä¸ºsplatè´´å›¾ã€‚å°±åƒå°†å¤šä¸ªåœ°å½¢ç‰¹å¾å–·æº…åˆ°ç”»å¸ƒä¸Šä¸€æ ·ã€‚ç”±äºæ’å€¼ï¼Œè¿™å¼ åœ°å›¾ç”šè‡³ä¸éœ€è¦é«˜åˆ†è¾¨ç‡ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/binary-splat-map.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>splaté®ç½©è´´å›¾.</a></i></center> </font><p>å°†å…¶æ·»åŠ åˆ°é¡¹ç›®åï¼Œå°†å…¶å¯¼å…¥ç±»å‹åˆ‡æ¢ä¸ºé«˜çº§ã€‚å¯ç”¨Bypass sRGB Samplingå¹¶æŒ‡ç¤ºå…¶mipmapåº”åœ¨Linear Spaceä¸­ç”Ÿæˆã€‚å› ä¸ºè¯¥çº¹ç†ä¸éœ€è¦sRGBé¢œè‰²ã€‚æ‰€ä»¥åœ¨çº¿æ€§ç©ºé—´ä¸­æ¸²æŸ“æ—¶ä¸åº”è¯¥è¿›è¡Œè½¬æ¢ã€‚å¦å¤–ï¼Œå°†å…¶ Wrap Mode è®¾ç½®ä¸ºclampï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä¼šå¹³é“ºè¿™å¼ åœ°å›¾ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/splat-map-binary-import.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>splatå¯¼å…¥è®¾ç½®.</a></i></center> </font><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Texture Splatting ç€è‰²å™¨ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Custom/Texture Splatting"</span> <span class="p">{</span>
    <span class="n">Properties</span> <span class="p">{</span>
        <span class="n">MainTex</span> <span class="p">(</span><span class="s">"Splat Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="n">SubShader</span> <span class="p">{</span>
        <span class="n">Pass</span> <span class="p">{</span>
        <span class="n">CGPROGRAM</span>

        <span class="cp">#pragma vertex MyVertexProgram
</span>        <span class="cp">#pragma fragment MyFragmentProgram
</span>
        <span class="cp">#include</span> <span class="cpf">"UnityCG.cginc"</span><span class="cp">
</span>
        <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
        <span class="kt">float4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>

        <span class="k">struct</span> <span class="n">VertexData</span> <span class="p">{</span>
            <span class="kt">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="nb">POSITION</span><span class="p">;</span>
            <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">struct</span> <span class="n">Interpolators</span> <span class="p">{</span>
            <span class="kt">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="nb">SV_POSITION</span><span class="p">;</span>
            <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">Interpolators</span> <span class="n">MyVertexProgram</span> <span class="p">(</span><span class="n">VertexData</span> <span class="n">v</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Interpolators</span> <span class="n">i</span><span class="p">;</span>
            <span class="n">i</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">UNITY_MATRIX_MVP</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
            <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_MainTex</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">float4</span> <span class="n">MyFragmentProgram</span> <span class="p">(</span><span class="n">Interpolators</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">ENDCG</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>åˆ›å»ºä¸€ä¸ªæ–°æè´¨å¹¶å¼•ç”¨è¯¥shaderï¼Œå¹¶å°†splatè´´å›¾æŒ‡å®šä¸ºå…¶ä¸»è¦çº¹ç†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/splat-map-binary-scene.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>splatå›¾æ¸²æŸ“.</a></i></center> </font><h3 id="å¢åŠ èåˆçº¹ç†">å¢åŠ èåˆçº¹ç†</h3><p>ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸¤ä¸ªçº¹ç†ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œä½œä¸ºå±æ€§æ·»åŠ å‘½åä¸ºTexture1å’ŒTexture2åˆ°æˆ‘ä»¬çš„ç€è‰²å™¨ä¸­ã€‚</p><div file="cg" class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Properties</span> <span class="p">{</span>
    <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Splat Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="n">_Texture1</span> <span class="p">(</span><span class="s">"Texture 1"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="n">_Texture2</span> <span class="p">(</span><span class="s">"Texture 2"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div><p>å¯ä»¥ä¸ºä»–ä»¬ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„çº¹ç†,è¿™é‡Œä½¿ç”¨ç½‘æ ¼çº¹ç†å’Œå¤§ç†çŸ³çº¹ç†ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/two-textures-inspector.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å¢åŠ çš„é¢å¤–çº¹ç†.</a></i></center> </font><p>ä¸ºæ·»åŠ åˆ°ç€è‰²å™¨çš„æ¯ä¸ªçº¹ç†ä¿®æ”¹å¹³é“ºå’Œåç§»æ§åˆ¶å€¼ã€‚è¿™éœ€è¦æˆ‘ä»¬å°†æ›´å¤šæ•°æ®ä»é¡¶ç‚¹ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ï¼Œæˆ–è€…åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è®¡ç®—UVè°ƒæ•´ã€‚ è¿™å¾ˆå¥½ï¼Œä½†é€šå¸¸åœ°å½¢çš„æ‰€æœ‰çº¹ç†éƒ½å¹³é“ºç›¸åŒã€‚å¹¶ä¸” splat åœ°å›¾æ ¹æœ¬æ²¡æœ‰å¹³é“ºã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå¹³é“ºå’Œåç§»æ§ä»¶çš„å®ä¾‹ã€‚</p><p>å¯ä»¥å°†å±æ€§æ§åˆ¶æ·»åŠ åˆ°ç€è‰²å™¨å±æ€§ä¹‹å‰ï¼Œå°±åƒåœ¨C#ä»£ç ä¸­ä¸€æ ·ã€‚<code class="language-plaintext highlighter-rouge">NoScaleOffset</code>å°†ç¦ç”¨çº¹ç†å¹³é“ºå’Œåç§»ã€‚</p><div file="shader" class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Properties</span> <span class="p">{</span>
    <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Splat Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture1</span> <span class="p">(</span><span class="s">"Texture 1"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture2</span> <span class="p">(</span><span class="s">"Texture 2"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div><p>åŒæ—¶ä¿®æ”¹splatè´´å›¾tilingä¸º4ã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/no-tiling-offset.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>ä¸éœ€è¦é¢å¤–çš„è´´å›¾çº¹ç†.</a></i></center> </font><p>å°†é‡‡æ ·å™¨å˜é‡æ·»åŠ åˆ°æˆ‘ä»¬çš„ç€è‰²å™¨ä»£ç ä¸­ï¼Œä½†æ˜¯ä¸å¿…æ·»åŠ å®ƒä»¬å¯¹åº”çš„ _ST å˜é‡ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
<span class="kt">float4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>

<span class="n">sampler2D</span> <span class="n">_Texture1</span><span class="p">,</span> <span class="n">_Texture2</span><span class="p">;</span>
</code></pre></div></div><p>å¯¹ä¸¤å¼ çº¹ç†é‡‡æ ·åå åŠ ï¼Œé¢œè‰²ä¼šå¾—åˆ°åŠ æ·±ï¼Œç„¶åè¾“å‡º</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="nf">MyFragmentProgram</span> <span class="p">(</span><span class="n">Interpolators</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture1</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">+</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture2</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/textures-added.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>çº¹ç†å åŠ .</a></i></center> </font><h3 id="ä½¿ç”¨splatè´´å›¾">ä½¿ç”¨splatè´´å›¾</h3><p>é‡‡æ ·splatçº¹ç†éœ€è¦é¡¶ç‚¹ç¨‹åºæä¾›çš„UVåæ ‡</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Interpolators</span> <span class="p">{</span>
    <span class="kt">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="nb">SV_POSITION</span><span class="p">;</span>
    <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
    <span class="kt">float2</span> <span class="n">uvSplat</span> <span class="o">:</span> <span class="nb">TEXCOORD1</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">Interpolators</span> <span class="nf">MyVertexProgram</span> <span class="p">(</span><span class="n">VertexData</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Interpolators</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">i</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">UNITY_MATRIX_MVP</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_MainTex</span><span class="p">);</span>
    <span class="n">i</span><span class="p">.</span><span class="n">uvSplat</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>ç„¶åï¼Œä»¥åœ¨å¯¹å…¶ä»–çº¹ç†è¿›è¡Œé‡‡æ ·ä¹‹å‰å¯¹splatè´´å›¾è¿›è¡Œé‡‡æ ·ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float4</span> <span class="nf">MyFragmentProgram</span> <span class="p">(</span><span class="n">Interpolators</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span> <span class="p">{</span>
    <span class="kt">float4</span> <span class="n">splat</span> <span class="o">=</span> <span class="nb">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uvSplat</span><span class="p">);</span>
    <span class="k">return</span>
    <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture1</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">+</span>
    <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture2</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>å› ä¸ºsplatæœ¬èº«æ˜¯å•é€šé“ï¼Œå¯ä»¥ä»»é€‰ä¸€ä¸ªRGBé€šé“æ¥æ¥å­˜å‚¨å€¼ï¼Œè¿™é‡Œå…ˆå†³å®šä½¿ç”¨ç¬¬ä¸€ä¸ªçº¹ç†ä¸splatè´´å›¾Ré€šé“ç›¸ä¹˜ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nf">tex2D</span><span class="p">(</span><span class="n">_Texture1</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">splat</span><span class="p">.</span><span class="n">r</span> <span class="o">+</span>
       <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture2</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/modulating-first-texture.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>è°ƒåˆ¶ç¬¬ä¸€ä¸ªçº¹ç†.</a></i></center> </font><p>ç¬¬ä¸€ä¸ªçº¹ç†ç°åœ¨ç”±splatè´´å›¾Ré€šé“è°ƒåˆ¶ã€‚ä¸ºäº†å®Œæˆæ’å€¼ï¼Œæˆ‘ä»¬å¿…é¡»å°†å¦ä¸€ä¸ªçº¹ç†<code class="language-plaintext highlighter-rouge">1-R</code>ç›¸ä¹˜ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nf">tex2D</span><span class="p">(</span><span class="n">_Texture1</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">splat</span><span class="p">.</span><span class="n">r</span> <span class="o">+</span>
       <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture2</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">splat</span><span class="p">.</span><span class="n">r</span><span class="p">);</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/modulating-both-textures.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>è°ƒåˆ¶ä¸¤ä¸ªçº¹ç†.</a></i></center> </font><h3 id="rgb-splatè´´å›¾">RGB Splatè´´å›¾</h3><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªåŠŸèƒ½æ€§çš„splatæè´¨ï¼Œä½†å®ƒåªæ”¯æŒä¸¤ç§çº¹ç†ã€‚æˆ‘ä»¬å¯ä»¥æ”¯æŒæ›´å¤šå—ï¼Ÿæˆ‘ä»¬ç°åœ¨åªä½¿ç”¨äº†Ré€šé“ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ·»åŠ Gå’ŒBé€šé“æ€ä¹ˆæ ·ï¼Ÿé‚£ä¹ˆ(1,0,0)ä»£è¡¨ç¬¬ä¸€ä¸ªçº¹ç†ï¼Œ(0,1,0)ä»£è¡¨ç¬¬äºŒä¸ªçº¹ç†ï¼Œ(0,0,1)ä»£è¡¨ç¬¬ä¸‰ä¸ªçº¹ç†ã€‚ ä¸ºäº†åœ¨è¿™ä¸‰ä¸ªä¹‹é—´è·å¾—æ­£ç¡®çš„æ’å€¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç¡®ä¿RGBé€šé“çš„æ€»å’Œä¸º1å³å¯ã€‚</p><p>ä½†æ˜¯ç­‰ç­‰ï¼Œå½“æˆ‘ä»¬åªä½¿ç”¨ä¸€ä¸ªé€šé“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ”¯æŒä¸¤ä¸ªçº¹ç†ã€‚è¿™æ˜¯å› ä¸ºç¬¬äºŒä¸ªçº¹ç†çš„æƒé‡æ˜¯é€šè¿‡<code class="language-plaintext highlighter-rouge">1-R</code>å¾—å‡ºçš„ã€‚åŒæ ·çš„æŠ€å·§é€‚ç”¨äºä»»æ„æ•°é‡çš„é€šé“ã€‚å› æ­¤å¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">1-R-G-B</code>æ”¯æŒå¦ä¸€ç§çº¹ç†ã€‚</p><p>è¿™å¯¼è‡´äº†ä¸€ä¸ªå…·æœ‰ä¸‰ç§é¢œè‰²å’Œé»‘è‰²çš„splatè´´å›¾ã€‚åªè¦ä¸‰ä¸ªé€šé“åŠ èµ·æ¥ä¸è¶…è¿‡1ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è´´å›¾ã€‚è¿™é‡Œç»™å‡ºä¸€å¼ è¿™æ ·çš„è´´å›¾ï¼Œå¯¼å…¥Unityã€‚</p><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/rgb-splat-map.png" width="250" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>RGB splat è´´å›¾.</a></i></center> </font><blockquote class="prompt-warning"><p>å½“ R + G + B è¶…è¿‡1æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>é‚£ä¹ˆå‰ä¸‰ä¸ªçº¹ç†çš„ç»„åˆä¼šå¤ªå¼ºã€‚ åŒæ—¶ï¼Œç¬¬å››ä¸ªçº¹ç†å°†è¢«å‡å»è€Œä¸æ˜¯è¢«æ·»åŠ ã€‚ å¦‚æœé”™è¯¯å¾ˆå°ï¼Œé‚£ä¹ˆä¸ä¼šæ³¨ æ„åˆ°å¹¶ä¸”ç»“æœè¶³å¤Ÿå¥½ã€‚ ç¤ºä¾‹ RGB æ˜ å°„å®é™…ä¸Šå¹¶ä¸å®Œç¾ï¼Œä½†ä¸ä¼šæ³¨æ„åˆ°ã€‚ çº¹ç†å‹ç¼©å¼•å…¥äº†æ›´å¤šé”™è¯¯ï¼Œä½† åŒæ ·éš¾ä»¥å¯Ÿè§‰ã€‚</p></blockquote><blockquote class="prompt-tip"><p>å¯ä»¥ä½¿ç”¨alphaé€šé“å—ï¼Ÿ</p><p>ç¡®å®å¯ä»¥ï¼ è¿™æ„å‘³ç€å•ä¸ª RGBA splat è´´å›¾æœ€å¤šå¯ä»¥æ”¯æŒäº”ç§ä¸åŒçš„åœ°å½¢ç±»å‹ã€‚ ä½†æ˜¯å¯¹äºæœ¬æ•™ç¨‹ï¼Œå››ä¸ª å°±è¶³å¤Ÿäº†ã€‚</p><p>å¦‚æœè¦ä½¿ç”¨è¶…è¿‡äº”ä¸ªçº¹ç†ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¤šä¸ªsplatè´´å›¾ã€‚è™½ç„¶è¿™æ˜¯å¯èƒ½çš„ï¼Œä½†æœ€ç»ˆä¼šå¾—åˆ°å¾ˆå¤šçº¹ç†é‡‡æ · æ­¤æ—¶å¯ä»¥ä½¿ç”¨æ›´å¥½çš„æŠ€æœ¯ï¼Œä¾‹å¦‚çº¹ç†æ•°ç»„ã€‚</p></blockquote><p>ä¸ºäº†æ”¯æŒ RGB splatè´´å›¾ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç€è‰²å™¨ä¸­æ·»åŠ ä¸¤ä¸ªé¢å¤–çš„çº¹ç†ã€‚ä¸ºå®ƒä»¬åˆ†é…äº†å¤§ç†çŸ³ç»†èŠ‚å’Œæµ‹è¯•çº¹ç†ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Properties</span> <span class="p">{</span>
    <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Splat Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture1</span> <span class="p">(</span><span class="s">"Texture 1"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture2</span> <span class="p">(</span><span class="s">"Texture 2"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture3</span> <span class="p">(</span><span class="s">"Texture 3"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">[</span><span class="n">NoScaleOffset</span><span class="p">]</span> <span class="n">_Texture4</span> <span class="p">(</span><span class="s">"Texture 4"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/splat-map-rgb-inspector.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>Four textures.</a></i></center> </font><p>å°†æ‰€éœ€çš„å˜é‡æ·»åŠ åˆ°ç€è‰²å™¨ã€‚ å†ä¸€æ¬¡ï¼Œæ²¡æœ‰é¢å¤–çš„ _STéœ€è¦çš„å˜é‡ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sampler2D</span> <span class="n">_Texture1</span><span class="p">,</span> <span class="n">_Texture2</span><span class="p">,</span> <span class="n">_Texture3</span><span class="p">,</span> <span class="n">_Texture4</span><span class="p">;</span>
</code></pre></div></div><p>åœ¨ç‰‡æ®µç¨‹åºä¸­ï¼Œæ·»åŠ é¢å¤–çš„çº¹ç†æ ·æœ¬ã€‚ç¬¬äºŒä¸ªæ ·æœ¬ç°åœ¨ä½¿ç”¨Gé€šé“ï¼Œç¬¬ä¸‰ä¸ªä½¿ç”¨Bé€šé“ã€‚æœ€ç»ˆæ ·æœ¬ç”¨ (1 - R - G - B) è°ƒåˆ¶ã€‚</p><div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">retur1n</span> <span class="nf">tex2D</span><span class="p">(</span><span class="n">_Texture1</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">splat</span><span class="p">.</span><span class="n">r</span> <span class="o">+</span>
        <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture2</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">splat</span><span class="p">.</span><span class="n">g</span> <span class="o">+</span>
        <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture3</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="n">splat</span><span class="p">.</span><span class="n">b</span> <span class="o">+</span>
        <span class="nb">tex2D</span><span class="p">(</span><span class="n">_Texture4</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">splat</span><span class="p">.</span><span class="n">r</span> <span class="o">-</span> <span class="n">splat</span><span class="p">.</span><span class="n">g</span> <span class="o">-</span> <span class="n">splat</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>
</code></pre></div></div><center class="half"><img class="fit-picture" loading="lazy" src="https://damonc-top2.github.io/web-assets/posts/2018/month1/catRender3/four-textures-splatted.png" width="300" alt="loading failed, need vpn." /></center> <font size="2.5"> <center><i><a>å››ä¸ªçº¹ç†é£æº….</a></i></center> </font><blockquote class="prompt-tip"><p>ä¸ºä»€ä¹ˆæ··åˆåŒºåŸŸåœ¨çº¿æ€§è‰²å½©ç©ºé—´ä¸­çœ‹èµ·æ¥ä¸åŒï¼Ÿ</p><p>æˆ‘ä»¬çš„ splat è´´å›¾ç»•è¿‡äº† sRGB é‡‡æ ·ï¼Œæ‰€ä»¥æ··åˆä¸åº”è¯¥å–å†³äºæˆ‘ä»¬ä½¿ç”¨çš„é¢œè‰²ç©ºé—´ï¼Œå¯¹å§ï¼Ÿ splat åœ°å›¾ ç¡®å®ä¸å—å½±å“ã€‚ ä½†æ˜¯å‘ç”Ÿæ··åˆçš„è‰²å½©ç©ºé—´ç¡®å®å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>åœ¨ä¼½é©¬ç©ºé—´æ¸²æŸ“çš„æƒ…å†µä¸‹ï¼Œæ ·æœ¬åœ¨ä¼½é©¬ç©ºé—´ä¸­æ··åˆï¼Œä»…æ­¤è€Œå·²ã€‚ ä½†æ˜¯åœ¨çº¿æ€§ç©ºé—´ä¸­æ¸²æŸ“æ—¶ï¼Œå®ƒä»¬é¦–å…ˆè½¬æ¢ä¸º çº¿æ€§ç©ºé—´ï¼Œç„¶åæ··åˆï¼Œç„¶åå†è½¬æ¢å›ä¼½é©¬ç©ºé—´ã€‚ ç»“æœç•¥æœ‰ä¸åŒã€‚ åœ¨çº¿æ€§ç©ºé—´ä¸­ï¼Œæ··åˆä¹Ÿæ˜¯çº¿æ€§çš„ã€‚ ä½†åœ¨ä¼½ é©¬ç©ºé—´ä¸­ï¼Œæ··åˆåå‘è¾ƒæ·±çš„é¢œè‰²ã€‚</p></blockquote><p>ç°åœ¨çŸ¥é“å¦‚ä½•åº”ç”¨ç»†èŠ‚çº¹ç†ä»¥åŠå¦‚ä½•å°†å¤šä¸ªçº¹ç†ä¸splatè´´å›¾æ··åˆã€‚ä¹Ÿå¯ä»¥ç»„åˆè¿™äº›æ–¹æ³•ã€‚</p><p>å¯ä»¥å°†å››ä¸ªç»†èŠ‚çº¹ç†æ·»åŠ åˆ°splatç€è‰²å™¨å¹¶ä½¿ç”¨è´´å›¾åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œæ··åˆã€‚å½“ç„¶ï¼Œè¿™éœ€è¦å››ä¸ªé¢å¤–çš„çº¹ç†é‡‡æ ·ï¼Œæ€§èƒ½æœ‰é™ã€‚</p><p>è¿˜å¯ä»¥ä½¿ç”¨è´´å›¾æ¥æ§åˆ¶åº”ç”¨ç»†èŠ‚çº¹ç†çš„ä½ç½®ä»¥åŠçœç•¥çš„ä½ç½®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ä¸€å¼ å•è‰²è´´å›¾ï¼Œå®ƒå¯ä»¥ç”¨ä½œé®ç½©ã€‚å½“å•ä¸ªçº¹ç†åŒæ—¶åŒ…å«è¡¨ç¤ºå¤šä¸ªä¸åŒæè´¨çš„åŒºåŸŸä½†æ²¡æœ‰åœ°å½¢é‚£ä¹ˆå¤§çš„é¢ç§¯æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„å¤§ç†çŸ³çº¹ç†è¿˜åŒ…å«é‡‘å±ç‰‡ï¼Œåˆ™ä¸å¸Œæœ›åœ¨æ­¤å¤„åº”ç”¨å¤§ç†çŸ³ç»†èŠ‚ã€‚</p></article><hr><div class='like-post'> <a style="color:rgb(112, 40, 85);" id="likeBtn" onclick="likePost(1);"> <i class="fa fa-thumbs-o-up fa-2x" aria-hidden="true"></i> </a> <span id="likeNum">0</span><div class="text-xs text-slate-500 mx-2">çœŸè¯šç‚¹èµï¼Œæ‰‹ç•™ä½™é¦™</div></div><h2 id="similar_posts">Similar Posts</h2><ul><li class="relatedPost"> <a href="/2024/07/10/Unity_Addressable_Editor/">Unity Addressable Editorç»“æ„ </a><li class="relatedPost"> <a href="/2018/01/25/Unity_Parallax_Normals_Heightmap/">è§†å·®å’Œæ³•çº¿ã€é«˜åº¦å›¾å›é¡¾(ç¿»è¯‘äºŒå) </a><li class="relatedPost"> <a href="/2018/01/24/Unity_GPU_Instance/">Unity GPU Instance(ç¿»è¯‘åä¹) </a><li class="relatedPost"> <a href="/2018/01/23/Unity_RealTime_GI_LOD/">Unity å®æ—¶ GI & LPPV & LOD(ç¿»è¯‘åå…«) </a><li class="relatedPost"> <a href="/2018/01/21/Unity_Mix_Lighting/">Unity æ··åˆå…‰ç…§(ç¿»è¯‘åä¸ƒ) </a><li class="relatedPost"> <a href="/2018/01/19/Unity_Static_Lightting/">Unity å…‰ç…§çƒ˜ç„™(ç¿»è¯‘åå…­) </a></ul><div class="post-recent"><div class="pre"><p><strong>ä¸Šä¸€ç¯‡</strong> <a href="/2018/01/02/Unity_Shader_Fundamentals/">Unity Shader åŸºæœ¬è¯­æ³•(ç¿»è¯‘äºŒ)</a></p></div><div class="nex"><p><strong>ä¸‹ä¸€ç¯‡</strong> <a href="/2018/01/03/Unity_First_light/">Unity åŸºç¡€å…‰ç…§(ç¿»è¯‘å››)</a></p></div></div><h2 id="comments">Comments</h2><div id="vcomments"></div><script type="text/javascript"> /*è¯„è®ºç›¸å…³*/ function delayLoadValine() { new Valine({ el: '#vcomments', verify: "true", notify: "false", app_id: "JgYk2pcFa3QxhhWPhDjjoPvv-MdYXbMMI", app_key: "fjDLTSUgCNGrSKgCID672IJx", avatar: "monsterid", placeholder: "æ¬¢è¿è¯„è®ºï¼", pageSize: "10 || 10", master: "b5586e582cb181c6b0fc8b2ce828bd50", tagMeta: ["åšä¸»","å°ä¼™ä¼´","è®¿å®¢"], enableQQ: true, requiredFields: [], serverURLs: "https://leanapi.damonc.top", recordIP: "true", visitor: "true", }); $(document).ready(function(){ fetch('https://v1.hitokoto.cn/') .then(response => response.json()) .then(data => { document.getElementById("veditor").setAttribute( "placeholder", data.hitokoto+"â€”"+data.from ); setTimeout(() => { addPostVisitedTimes(); }, 1000); } ) .catch(console.error); }); } /*ç‚¹èµç›¸å…³*/ var curIpVisitRecord = null; var curPost = null; var curUrl = "https://www.damonc.top/2018/01/02/Unity_Combine_Texture/"; function getVisitorIpAndJudge() { $.getJSON('https://api.ipify.org?format=json', function(data){ saveOrUpdateIpRecord(data.ip) }); } function saveOrUpdateIpRecord(ip) { var Visitor = AV.Object.extend("visitors_record"); var post_url = curUrl; var query = new AV.Query(Visitor); query.equalTo("visitor_ip", ip); query.equalTo("post_url", post_url); query.find().then(function(results) { if (results.length > 0) { /* if(window.console){ console.log('è¯¥IPå·²è®¿é—®è¿‡è¯¥æ–‡ç« '); }*/ curIpVisitRecord = results[0]; updateIpRecord(); refreshLikeBtn(); } else { /*if(window.console){ console.log('è¯¥IPç¬¬ä¸€æ¬¡è®¿é—®è¯¥æ–‡ç« ï¼Œä¿å­˜æ–°çš„è®¿é—®è®°å½•ï¼Œå¹¶å¢åŠ è®¿é—®æ¬¡æ•°'); }*/ addNewIpRecord(ip, post_url); } }, function(error) { addPostVisitedTimes(); }); } function addPostVisitedTimes() { var AV_Posts = AV.Object.extend("Posts"); var url = curUrl; var title = "Unity å¤šçº¹ç†èåˆ(ç¿»è¯‘ä¸‰)"; var query = new AV.Query(AV_Posts); query.equalTo("post_url", url); query.find().then(function(results) { if (results.length > 0) { curPost = results[0]; curPost.increment("visited_times"); curPost.save(); loadLikeNums(); } else { curPost = new AV_Posts(); /* Set ACL */ var acl = new AV.ACL(); acl.setPublicReadAccess(true); acl.setPublicWriteAccess(true); curPost.setACL(acl); /* End Set ACL */ curPost.set("post_title", title); curPost.set("post_url", url); curPost.set("visited_times", 1); curPost.set('like_times', 0); curPost.save(); } getVisitorIpAndJudge(); }, function(error) { console.log('Error:' + error.code + " " + error.message); }); } function showPostVisitedTimes() { var AV_Posts = AV.Object.extend("Posts"); var $visitors = $(".leancloud_visitors"); var url = $visitors.attr('id').trim(); var title = $visitors.attr('data-flag-title').trim(); var query = new AV.Query(AV_Posts); query.equalTo("post_url", url); query.find().then(function(results) { if (results.length > 0) { curPost = results[0]; loadLikeNums(); } else { /*if(window.console){ console.log('å¼‚å¸¸æƒ…å†µï¼Œä¸åº”è¯¥æ²¡è®°å½•çš„'); }*/ } }, function(error) { console.log('Error:' + error.code + " " + error.message); }); } function updateIpRecord(){ var lastTime = curIpVisitRecord.updatedAt; var curTime = new Date(); var timePassed = curTime.getTime() - lastTime.getTime(); if(timePassed > 300000) { /*if(window.console){ console.log('è·ç¦»è¯¥IPä¸Šä¸€æ¬¡è®¿é—®è¯¥æ–‡ç« å·²è¶…è¿‡äº†5åˆ†é’Ÿï¼Œæ›´æ–°è®¿é—®è®°å½•ï¼Œå¹¶å¢åŠ è®¿é—®æ¬¡æ•°'); }*/ addPostVisitedTimes(); curIpVisitRecord.save(); } else { /*console.log('è¿™æ˜¯è¯¥IP 1åˆ†é’Ÿå†…é‡å¤è®¿é—®è¯¥æ–‡ç« ï¼Œä¸æ›´æ–°è®¿é—®è®°å½•ï¼Œä¸å¢åŠ è®¿é—®æ¬¡æ•°');*/ } } function addNewIpRecord(ip, post_url){ var Visitor = AV.Object.extend("visitors_record"); curIpVisitRecord = new Visitor(); /* Set ACL */ var acl = new AV.ACL(); acl.setPublicReadAccess(true); acl.setPublicWriteAccess(true); curIpVisitRecord.setACL(acl); curIpVisitRecord.set("visitor_ip", ip); curIpVisitRecord.set("post_url", post_url); curIpVisitRecord.set("like_this_post", 0); curIpVisitRecord.save(); } function loadLikeNums() { var likeTimes = curPost.get('like_times'); $("#likeNum").text(likeTimes); } function refreshLikeBtn() { var likeState = curIpVisitRecord.get('like_this_post'); if(likeState == 1){ $("#likeBtn").css("color", "red"); $("#likeBtn").attr("onclick", "likePost(-1)"); } else { $("#likeBtn").css("color", "rgb(112, 40, 85)"); $("#likeBtn").attr("onclick", "likePost(1)"); } loadLikeNums(); } function likePost(type) { if(curPost == null || curIpVisitRecord == null) { alert('å»¶è¿Ÿ10såæ‰èƒ½ç‚¹èµ, è¯·ç¨ç­‰...'); return } var newNum; var getlikeTime = curPost.get('like_times'); if(typeof getlikeTime == "undefined" || getlikeTime == null || getlikeTime == "") { newNum = parseInt(type); }else{ newNum = parseInt(type) + parseInt(getlikeTime); } curPost.set('like_times', newNum); curPost.save().then(function(curPost){ var likeThisPost = type == -1 ? 0 : 1; curIpVisitRecord.set("like_this_post", likeThisPost); curIpVisitRecord.save().then(function(){ refreshLikeBtn(); }); },function(error){ console.log('Failed to create visitor record, with error message: ' + error.message); }); } /*å¯åŠ¨æ‰§è¡Œ*/ delayLoadValine(); </script></div></div><script> /** * target _blank */ (function() { var aTags = document.querySelectorAll('article a:not([id])'); for (var i = 0; i < aTags.length; i++) { var htps = aTags[i].href; if (htps.startsWith("https://")) aTags[i].setAttribute('target', '_blank'); } }()); </script> <script src="/js/pageContent.js " charset="utf-8"></script><footer class="site-footer"><div class="wrapper"><p class="description"> äº‘ä¸Šçš„æ—¥å­!</p><p class="contact"> <a href="https://github.com/bitfeng" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a> <a href="mailto:damonc@126.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></p><p> æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ï¼Œæœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ï¼Œæœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>æ¬¡</p></div></footer><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="back-to-top"> <a href="#top" data-scroll> <i class="fa fa-arrow-up" aria-hidden="true"></i> </a></div><script src=" /js/main.js " charset="utf-8"></script> <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script> <script type="text/javascript"> smoothScroll.init({ speed: 500, easing: 'easeInOutCubic', offset: 20, }); function displayWindowSize() { var w = document.documentElement.clientWidth; var h = document.documentElement.clientHeight; var rightDiv = document.querySelector('.right'); var footer = document.querySelector('.site-footer'); if(!rightDiv || !footer){ return; } if(w <= 1700){ rightDiv.style.display='none'; footer.style.display='none'; }else{ rightDiv.style.display='block'; footer.style.display = "block"; } } window.addEventListener("resize", displayWindowSize); displayWindowSize(); </script>
